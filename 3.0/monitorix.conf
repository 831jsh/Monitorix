# Monitorix - configuration file
#
# See monitorix.conf(5) manpage for a detailed description of each option.
#

title = Place a title here
hostname =
theme_color = black
refresh_rate = 150
iface_mode = graph
enable_zoom = y
netstats_in_bps = n
disable_javascript_void = n

base_dir = /usr/share/monitorix/
base_lib = /var/lib/monitorix/
base_url = /monitorix
base_cgi = /monitorix-cgi


# Log files pathnames
# -----------------------------------------------------------------------------
log_file	= /var/log/monitorix
secure_log	= /var/log/secure
mail_log	= /var/log/maillog
milter_gl	= /var/milter-greylist/greylist.db
imap_log	= /var/log/imap
hylafax_log	= /var/spool/hylafax/etc/xferfaxlog
cups_log	= /var/log/cups/page_log
fail2ban_log	= /var/log/fail2ban.log
spamassassin_log	= /var/log/maillog
clamav_log	= /var/log/clamav/clamav.log
cg_logdir	= /var/CommuniGate/SystemLogs/
squid_log	= /var/log/squid/access.log

imap_date_log_format = %b %d


# Alert capabilities
# -----------------------------------------------------------------------------
enable_alerts = n
alert_loadavg_timeintvl = 3600
alert_loadavg_threshold = 5.0
alert_loadavg_script = /path/to/script.sh

alert_rootfs_timeintvl = 3600
alert_rootfs_threshold = 100
alert_rootfs_script = /path/to/script.sh


# Graphs (de)activation
# -----------------------------------------------------------------------------
<graph_enable>
	system		= y
	kern		= y
	proc		= y
	hptemp		= n
	lmsens		= n
	nvidia		= n
	disk		= n
	fs		= y
	net		= y
	serv		= y
	mail		= n
	port		= y
	user		= y
	apache		= n
	nginx		= n
	lighttpd	= n
	mysql		= n
	squid		= n
	nfss		= n
	nfsc		= n
	bind		= n
	ntp		= n
	fail2ban	= n
	icecast		= n
	int		= y
	pc		= n
</graph_enable>


# SYSTEM graph
# -----------------------------------------------------------------------------
#<system>
	system1_rigid = 1
	system1_limit = 1
	system2_rigid = 0
	system2_limit = 100
#</system>


# KERNEL graph
# -----------------------------------------------------------------------------
kern_graph_mode = r
kern1_rigid = 2
kern1_limit = 100
<kern_data>
	user	= y
	nice	= y
	sys	= y
	iow	= y
	irq	= y
	sirq	= y
	steal	= y
	guest	= y
</kern_data>


# PROC graph
# -----------------------------------------------------------------------------
proc_max = 4
proc_per_row = 2
proc_size = medium
proc_data = y
proc_rigid = 2
proc_limit = 100


# HPTEMP graph
# -----------------------------------------------------------------------------
hptemp1 = 2, 3
hptemp2 = 1, 6
hptemp3 = 16, 18, 19, 20, 21, 22


# LMSENS graph
# -----------------------------------------------------------------------------
<sensors_list>
	core0	= Core 0
	core1	= Core 1
	mb0	= M/B Temp
	cpu0	= CPU Temp
	fan0	= fan1
	fan1	= fan2
	fan2	= fan3
	volt0	= VCore 1
	volt1	= VCore 2
	volt2	= \\+3.3V
	volt3	= \\+5V
	volt4	= \\+12V
	volt5	= \\-12V
	volt6	= \\-5V
	volt7	= Battery
	gpu0	= nvidia
</sensors_list>


# NVIDIA graph
# -----------------------------------------------------------------------------
nvidia_max = 1


# DISK graph
# -----------------------------------------------------------------------------
<disk_list>
	0 = /dev/sda, /dev/sdb, /dev/sdc
</disk_list>


# FS graph
# -----------------------------------------------------------------------------
<fs_list>
	0 = /, swap, /boot
</fs_list>
<fs_desc>
	/	= rootfs
	swap	= swap
</fs_desc>
fs2_rigid = 0
fs2_limit = 1000
fs3_rigid = 0
fs3_limit = 1000


# NET graph
# -----------------------------------------------------------------------------
net_list = eth0
<net_desc>
	eth0 = FastEthernet LAN, 0, 10000000
</net_desc>
net_gateway = eth0


# SERV graph
# -----------------------------------------------------------------------------
serv_mode = i
serv1_rigid = 0
serv1_limit = 1000
serv2_rigid = 0
serv2_limit = 1000
serv3_rigid = 0
serv3_limit = 1000


# MAIL graph
# -----------------------------------------------------------------------------
mail_mta = sendmail
mail_greylist = milter-greylist
mail1_rigid = 0
mail1_limit = 1
mail2_rigid = 0
mail2_limit = 1000
mail3_rigid = 0
mail3_limit = 1000
mail4_rigid = 0
mail4_limit = 1000
mail5_rigid = 0
mail5_limit = 1000


# PORT graph
# -----------------------------------------------------------------------------
port_max = 9
port_rule = 24000
port_list = 25, 21, 80, 22, 110, 139, 3306, 53, 143
<port_desc>
	25	= SMTP,    tcp, 0, 1000
	21	= FTP,     tcp, 0, 1000
	80	= HTTP,    tcp, 0, 1000
	22	= SSH,     tcp, 0, 1000
	110	= POP3,    tcp, 0, 1000
	139	= NETBIOS, tcp, 0, 1000
	3306	= MYSQL,   tcp, 0, 1000
	53	= DNS,     udp, 0, 1000
	143	= IMAP,    tcp, 0, 1000
</port_desc>


# USER graph
# -----------------------------------------------------------------------------
user1_rigid = 0
user1_limit = 100
user2_rigid = 0
user2_limit = 100
user3_rigid = 0
user3_limit = 100


# APACHE graph
# -----------------------------------------------------------------------------
apache_list = http://localhost/
apache1_rigid = 0
apache1_limit = 100
apache2_rigid = 2
apache2_limit = 100
apache3_rigid = 0
apache3_limit = 100


# NGINX graph
# -----------------------------------------------------------------------------
nginx_port = 80
nginx_rule = 24100
nginx1_rigid = 0
nginx1_limit = 100
nginx2_rigid = 0
nginx2_limit = 100
nginx3_rigid = 0
nginx3_limit = 100


# LIGHTTPD graph
# -----------------------------------------------------------------------------
lighttpd_list = http://localhost/
lighttpd1_rigid = 0
lighttpd1_limit = 100
lighttpd2_rigid = 0
lighttpd2_limit = 100
lighttpd3_rigid = 0
lighttpd3_limit = 100


# MYSQL graph
# -----------------------------------------------------------------------------
mysql_conn_type = Host
mysql_host_list = localhost
<mysql_desc>
	localhost = 3306
</mysql_desc>
mysql_sock_list = /var/lib/mysql/mysql.sock
mysql1_rigid = 0
mysql1_limit = 100
mysql2_rigid = 2
mysql2_limit = 100
mysql3_rigid = 0
mysql3_limit = 100
mysql4_rigid = 0
mysql4_limit = 100
mysql5_rigid = 0
mysql5_limit = 100
mysql6_rigid = 0
mysql6_limit = 100


# SQUID graph
# -----------------------------------------------------------------------------
squid_cmd = squidclient -h 127.0.0.1
squid_graph_1 = TCP_MISS, TCP_DENIED, TCP_REFRESH_HIT, TCP_IMS_HIT, TCP_HIT, TCP_REFRESH_MISS, TCP_MEM_HIT, TCP_NEGATIVE_HIT, TCP_CLIENT_REFRESH_MISS
squid_graph_2 = 200, 403, 304, 204, 302, 000, 404, 301, 206
squid1_rigid = 0
squid1_limit = 100
squid2_rigid = 0
squid2_limit = 100
squid3_rigid = 0
squid3_limit = 100
squid4_rigid = 0
squid4_limit = 100
squid5_rigid = 0
squid5_limit = 100
squid6_rigid = 0
squid6_limit = 100
squid7_rigid = 0
squid7_limit = 100
squid8_rigid = 0
squid8_limit = 100
squid9_rigid = 0
squid9_limit = 100


# NFSS graph
# -----------------------------------------------------------------------------
nfss_version = 3
nfss_graph_1 = readlink, create, mkdir, symlink, rmdir, remove, rename, link, readdir
nfss_graph_2 = mknod, readdirplus, fsstat, fsinfo, pathconf, access, lookup, commit, null
nfss_graph_3 = read, write, getattr, setattr
nfss1_rigid = 0
nfss1_limit = 100
nfss2_rigid = 0
nfss2_limit = 100
nfss3_rigid = 0
nfss3_limit = 100
nfss4_rigid = 0
nfss4_limit = 100
nfss5_rigid = 0
nfss5_limit = 100
nfss6_rigid = 0
nfss6_limit = 100
nfss7_rigid = 0
nfss7_limit = 100
nfss8_rigid = 0
nfss8_limit = 100
nfss9_rigid = 0
nfss9_limit = 100


# NFSC graph
# -----------------------------------------------------------------------------
nfsc_version = 3
nfsc_graph_1 = readlink, create, mkdir, symlink, rmdir, remove, rename, link, readdir
nfsc_graph_2 = mknod, readdirplus, fsstat, fsinfo, pathconf
nfsc_graph_3 = read, write
nfsc_graph_4 = getattr, setattr
nfsc_graph_5 = access, lookup, commit, null
nfsc1_rigid = 0
nfsc1_limit = 100
nfsc2_rigid = 0
nfsc2_limit = 100
nfsc3_rigid = 0
nfsc3_limit = 100
nfsc4_rigid = 0
nfsc4_limit = 100
nfsc5_rigid = 0
nfsc5_limit = 100
nfsc6_rigid = 0
nfsc6_limit = 100


# BIND graph
# -----------------------------------------------------------------------------
bind_url_list = http://localhost:8053/
<bind_in_queries_list>
	http://localhost:8053/ = A, AAAA, ANY, DS, MX, NS, PTR, SOA, SRV, TXT, NAPTR, A6, CNAME, SPF, KEY, DNSKEY, HINFO, WKS, PX, NSAP
</bind_in_queries_list>
<bind_out_queries_list>
	http://localhost:8053/ = A, AAAA, ANY, DS, MX, NS, PTR, SOA, SRV, TXT, NAPTR, A6, CNAME, SPF, KEY, DNSKEY, HINFO, WKS, PX, NSAP
</bind_out_queries_list>
<bind_server_stats_list>
	http://localhost:8053/ = Requestv4, Requestv6, ReqEdns0, ReqBadEDNSVer, ReqTSIG, ReqSIG0, ReqBadSIG, ReqTCP, Response, QrySuccess, QryAuthAns, QryNoauthAns, QryReferral, QryNxrrset, QrySERVFAIL, QryNXDOMAIN, QryRecursion, QryDuplicate, QryDropped, QryFailure
</bind_server_stats_list>
<bind_resolver_stats_list>
	http://localhost:8053/ = Queryv4, Queryv6, Responsev4, Responsev6, NXDOMAIN, SERVFAIL, FORMERR, OtherError, EDNS0Fail, Truncated, Lame, Retry, QueryTimeout, GlueFetchv4, GlueFetchv6, GlueFetchv4Fail, GlueFetchv6Fail, ValAttempt, ValOk, ValNegOk
</bind_resolver_stats_list>
<bind_cache_rrsets_list>
	http://localhost:8053/ = A, !A, AAAA, !AAAA, DLV, !DLV, DS, !DS, MX, NS, CNAME, !CNAME, SOA, !SOA, !ANY, PTR, RRSIG, NSEC, DNSKEY, NXDOMAIN
</bind_cache_rrsets_list>
bind1_rigid = 0
bind1_limit = 100
bind2_rigid = 0
bind2_limit = 100
bind3_rigid = 0
bind3_limit = 100
bind4_rigid = 0
bind4_limit = 100
bind5_rigid = 0
bind5_limit = 100


# NTP graph
# -----------------------------------------------------------------------------
ntp_host_list = localhost
<ntp_code_list>
	localhost = AUTH, AUTO, CRYP, DENY, GPS, INIT, NKEY, RATE, RMOT, RSTR
</ntp_code_list>
ntp1_rigid = 0
ntp1_limit = 100
ntp2_rigid = 0
ntp2_limit = 100


# FAIL2BAN graph
# -----------------------------------------------------------------------------
fail2ban_per_row = 2
fail2ban_list = Security, Overload / Abuse
<fail2ban_desc>
	0 = [apache], [apache-mod-security], [apache-overflows], [courierauth], [ssh], [pam-generic], [php-url-fopen], [vsftpd]
	1 = [apache-imdbphp], [apache-evasive], [apache-badbots], [apache-robots-txt], [communigate], [named-refused-udp], [named-refused-tcp], [trac-ticketspam]
</fail2ban_desc>
fail2ban_rigid = 0
fail2ban_limit = 100


# ICECAST graph
# -----------------------------------------------------------------------------
icecast_url_list = http://localhost:8000/status.xsl
<icecast_mp_list>
	http://localhost:8000/status.xsl = stream1, stream2, stream3
</icecast_mp_list>
icecast_graph_mode = r
icecast1_rigid = 0
icecast1_limit = 100
icecast2_rigid = 0
icecast2_limit = 100


# INT graph
# -----------------------------------------------------------------------------
int1_rigid = 0
int1_limit = 100
int2_rigid = 0
int2_limit = 100
int3_rigid = 0
int3_limit = 100


# PC LAN Internet traffic accounting
# -----------------------------------------------------------------------------
pc_max = 10
pc_rigid = 0
pc_limit = 1000
pc_imgs_per_row = 2
pc_enable_monthly_reports = n
pc_report_lang = en
pc_default_mail = root@localhost
pc_list = pc101, pc102, pc103, pc104
<pc_ip>
	0 = 192.168.1.101/32, ace@example.com
	1 = 192.168.1.102/32, gene@example.com
	2 = 192.168.1.103/32, paul@example.com
	3 = 192.168.1.104/32, peter@example.com
</pc_ip>


# Multihost
# -----------------------------------------------------------------------------
<multihost>
	enabled = n
	footer_url = y
	imgs_per_row = 2
	remotehost_list = server 1, server 2, server 3
	<remotehost_url>
		0 = http://www.example.com
		1 = http://10.0.0.1
		2 = http://192.168.0.100:8080
	</remotehost_url>
	groups = n
	remotegroup_list = My Group
	<remotegroup_desc>
		0 = server 2, server 3
	</remotegroup_desc>
</multihost>


# ========================================================================
# ======  Probably you don't need to touch anything below this line ======
# ========================================================================

theme = black
timeout = 15

imgs_dir = imgs/
usage_dir = usage/
report_dir = reports/
favicon = /monitorixico.png

<black>
	canvas		= 000000
	back		= 101010
	font		= C0C0C0
	mgrid		= 80C080
	grid		= 808020
	frame		= 808080
	arrow		= FFFFFF
	shadea		= 404040
	shadeb		= 404040
	axis		= 101010
	main_bg		= 000000
	main_fg		= FFFFFF
	title_bg	= 333333
	title_fg	= 888800
	graph_bg	= 888888
</black>

<graph_size>
	main	= 450x150
	medium	= 325x150
	medium2	= 325x70
	small	= 200x66
	mini	= 183x66
	tiny	= 110x40
	zoom	= 800x300
	remote	= 300x100
</graph_size>

graph_name = system, kern, proc, hptemp, lmsens, nvidia, disk, fs, net, serv, mail, port, user, apache, nginx, lighttpd, mysql, squid, nfss, nfsc, bind, ntp, fail2ban, icecast, int

<graph_title>
	system		= System load average and usage
	kern		= Global kernel usage
	proc		= Kernel usage per processor
	hptemp		= HP ProLiant System Health
	lmsens		= LM-Sensors and GPU temperatures
	nvidia		= NVIDIA temperatures and usage
	disk		= Disk drive temperatures and health
	fs		= Filesystem usage and I/O activity
	net		= Network traffic and usage
	serv		= System services demand
	mail		= Mail statistics
	port		= Network port traffic
	user		= Users using the system
	apache		= Apache statistics
	nginx		= Nginx statistics
	lighttpd	= Lighttpd statistics
	mysql		= MySQL statistics
	squid		= Squid statistics
	nfss		= NFS server statistics
	nfsc		= NFS client statistics
	bind		= BIND statistics
	ntp		= NTP statistics
	fail2ban	= Fail2ban statistics
	icecast		= Icecast Streaming Media Server
	int		= Devices interrupt activity
</graph_title>

<graphs>
	_system1	= System load
	_system2	= Active processes
	_system3	= Memory allocation
	_kern1		= Kernel usage
	_kern2		= Context switches and forks
	_kern3		= VFS usage
	_proc		= Processor
	_hptemp1	= Temperatures 1
	_hptemp2	= Temperatures 2
	_hptemp3	= Temperatures 3
	_lmsens1	= Core temperatures
	_lmsens2	= Voltages
	_lmsens3	= MB and CPU temperatures
	_lmsens4	= Fan speeds
	_lmsens5	= GPU temperatures
	_nvidia1	= NVIDIA temperatures
	_nvidia2	= CPU usage
	_nvidia3	= Memory usage
	_disk1		= Disk drives temperatures
	_disk2		= Reallocated sector count
	_disk3		= Current pending sector
	_fs1		= Filesystems usage
	_fs2		= Disk I/O activity
	_fs3		= Time spent in I/O activity
	_net1		= Network traffic
	_net2		= Network packets
	_net3		= Network errors
	_serv1		= System services demand
	_serv2		= IMAP and POP3 services
	_serv3		= SMTP service
	_mail1		= Mail statistics
	_mail2		= Network traffic
	_mail3		= Mails in queue
	_mail4		= Queue size
	_mail5		= Greylisting
	_port		= Port
	_user1		= Users logged in
	_user2		= Samba users
	_user3		= Netatalk users
	_apache1	= Apache workers
	_apache2	= Apache CPU usage
	_apache3	= Apache requests
	_nginx1		= Nginx connections
	_nginx2		= Nginx requests
	_nginx3		= Nginx traffic
	_lighttpd1	= Lighttpd workers
	_lighttpd2	= Lighttpd traffic
	_lighttpd3	= Lighttpd requests
	_mysql1		= MySQL query types
	_mysql2		= MySQL overall stats
	_mysql3		= Table saturation and MyISAM
	_mysql4		= MySQL queries
	_mysql5		= MySQL connections
	_mysql6		= MySQL traffic
	_squid1		= Squid statistics 1
	_squid2		= Squid statistics 2
	_squid3		= Overall I/O
	_squid4		= Memory usage
	_squid5		= Store directory stats
	_squid6		= IP cache stats
	_squid7		= Network protocols usage
	_squid8		= Client traffic
	_squid9		= Server traffic
	_nfss1		= NFS server stats 1
	_nfss2		= NFS server stats 2
	_nfss3		= NFS server stats 3
	_nfss4		= Overall I/O
	_nfss5		= Network layer
	_nfss6		= RPC
	_nfss7		= Thread utilization
	_nfss8		= Read cache
	_nfss9		= File handle cache
	_nfsc1		= NFS client stats 1
	_nfsc2		= NFS client stats 2
	_nfsc3		= NFS client stats 3
	_nfsc4		= NFS client stats 4
	_nfsc5		= NFS client stats 5
	_nfsc6		= RPC client stats
	_bind1		= Incoming queries
	_bind2		= Outgoing queries (_default)
	_bind3		= Name server statistics
	_bind4		= Resolver statistics (_default)
	_bind5		= Cache DB RRsets (_default)
	_bind6		= Memory usage
	_bind7		= Task manager
	_ntp1		= NTP timing stats
	_ntp2		= Stratum level
	_ntp3		= Codes
	_fail2ban	= Fail2ban jails
	_icecast1	= Current Listeners
	_icecast2	= Bitrate
	_int1		= Interrupt activity
	_int2		= Core activity
	_int3		= Interrupt activity
</graphs>
